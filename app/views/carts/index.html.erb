<div class="container-fluid mt-4">
  <div class="row">
    <!-- My Rentals Column -->
    <div class="col-md-6">
      <h2 class="text-center mb-4">My Rentals</h2>

      <% if @carts.any? %>
        <ul class="list-group mb-4">
          <% @carts.each do |cart| %>
            <% if cart.user == current_user %>
              <li class="list-group-item">
                <div class="row align-items-center">
                  <div class="col-md-8">
                    <strong><%= cart.item.name %></strong>
                    <br>
                    <small>Price: <%= number_to_currency(cart.item.price) %></small>
                    <br>
                    <small>From: <%= cart.start_date.strftime('%B %d, %Y') %></small>
                    <br>
                    <small>To: <%= cart.end_date.strftime('%B %d, %Y') %></small>
                    <br>
                    <small>Status: <%= cart.status %></small>
                  </div>
                  <div class="col-md-4 text-right">
                    <%= button_to 'Remove', cart_path(cart), method: :delete, class: 'btn btn-outline-danger btn-block', data: { confirm: 'Are you sure you want to remove this item?' } %>
                  </div>
                </div>
              </li>
            <% end %>
          <% end %>
        </ul>

        <div class="text-center mb-4">
          <h4>Total Price: <%= number_to_currency(@total_price) %></h4>
        </div>

        <div class="text-center mb-4">
          <%= button_to 'Remove All Items', remove_all_carts_path, method: :delete, class: 'btn btn-warning btn-block', data: { confirm: 'Are you sure you want to remove all items from your cart?' } %>
        </div>
      <% else %>
        <p class="text-center">Your cart is empty.</p>
      <% end %>

      <div class="text-center">
        <%= link_to "Add More Items", items_path, class: "btn btn-primary btn-block" %>
      </div>
    </div>

    <!-- My Rented Items Column -->
    <div class="col-md-6">
      <h2 class="text-center mb-4">My Rented Items</h2>

      <ul class="list-group mb-4">
        <% @carts.each do |cart| %>
          <% if cart.item.user == current_user %>
            <li class="list-group-item">
              <div class="row align-items-center">
                <div class="col-md-8">
                  <strong><%= cart.item.name %></strong>
                  <br>
                  <small>Price: <%= number_to_currency(cart.item.price) %></small>
                  <br>
                  <small>From: <%= cart.start_date.strftime('%B %d, %Y') %></small>
                  <br>
                  <small>To: <%= cart.end_date.strftime('%B %d, %Y') %></small>
                  <br>
                  <small>Status: <%= cart.status %></small>
                </div>
                <div class="col-md-4 text-right">
                  <% if cart.status == 'pending' %>
                    <div class="btn-group-vertical w-100" role="group">
                      <%= button_to 'Confirm', accept_cart_path(cart), method: :patch, class: 'btn btn-success btn-block mb-2', data: { confirm: "Your total price is #{number_to_currency(@total_price)}. Do you want to confirm?" } %>
                      <%= button_to 'Cancel', decline_cart_path(cart), method: :patch, class: 'btn btn-danger btn-block', data: { confirm: 'Are you sure you want to cancel this booking?' } %>
                    </div>
                  <% end %>
                </div>
              </div>
            </li>
          <% end %>
        <% end %>
      </ul>
    </div>
  </div>
</div>
